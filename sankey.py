nodes = [
    {'name': 'Carbon dioxide emissions from Germany to U.S.'},
    {'name': 'Agriculture 0.231%'},
    {'name': 'Manufacturing 35.928%'},
    {'name': 'Trades 2.771%'},
    {'name': 'Transport 27.551%'},
    {'name': 'Service 0.262%'},
    {'name': 'Construction 0.100%'},
    {'name': 'Electricity, Gas and Water 32.088%'},
    {'name': 'Others 1.070%'},
    {'name': 'Agricultures 0.230%'},
    {'name': 'Fishing 0.001%'},
    {'name': 'Food & Beverages 0.363%'},
    {'name': 'Textiles and Wearing Apparel 0.217%'},
    {'name': 'Wood and Paper 0.730%'},
    {'name': 'Petroleum, Chemical and \nNon-Metallic Mineral Products 19.739%'},
    {'name': 'Metal Products 3.878%'},
    {'name': 'Electrical and Machinery 4.271%'},
    {'name': 'Transport Equipment 6.463%'},
    {'name': 'Other Manufacturing 0.265%'},
    {'name': 'Electricity, Gas and Waters 32.088%'},
    {'name': 'Constructions 0.100%'},
    {'name': 'Maintenance and Repair 0.012%'},
    {'name': 'Hotels and Restraurants 0.036%'},
    {'name': 'Education, Health and \nOther Services 0.214%'},
    {'name': 'Wholesale Trade 0.582%'},
    {'name': 'Finacial Intermediation and \nBusiness Activities 2.088%'},
    {'name': 'Retail Trade 0.100%'},
    {'name': 'Re-export & Re-import 0.000%'},
    {'name': 'Transports 27.289%'},
    {'name': 'Post and Telecommunications 0.262%'},
    {'name': 'Mining and Quarrying 0.918%'},
    {'name': 'Private Households 0.000%'},
    {'name': 'Recycling 0.113%'},
    {'name': 'Public Administration 0.039%'},
    {'name': 'Other 0.000%'}
]

links = [
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Agriculture 0.231%', 'value': 0.230862966},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Manufacturing 35.928%', 'value': 35.92767289},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Trades 2.771%', 'value': 2.770562678},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Transport 27.551%', 'value': 27.55089483},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Service 0.262%', 'value': 0.168233512},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Construction 0.100%', 'value': 0.262124009},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Electricity, Gas and Water 32.088%', 'value': 32.0882246},
    {'source': 'Carbon dioxide emissions from Germany to U.S.', 'target': 'Others 1.070%', 'value': 1.070113424},
    {'source': 'Agriculture 0.231%', 'target': 'Agricultures 0.230%', 'value 0.509%': 0.229720075},
    {'source': 'Agriculture 0.231%', 'target': 'Fishing 0.001%', 'value 0.001%': 0.001142891},
    {'source': 'Manufacturing 35.928%', 'target': 'Food & Beverages 0.363%', 'value': 0.363396035},
    {'source': 'Manufacturing 35.928%', 'target': 'Textiles and Wearing Apparel 0.217%', 'value': 0.217033646},
    {'source': 'Manufacturing 35.928%', 'target': 'Wood and Paper 0.730%', 'value': 0.730213426},
    {'source': 'Manufacturing 35.928%', 'target': 'Petroleum, Chemical and \nNon-Metallic Mineral Products 19.739%','value': 19.73938571},
    {'source': 'Manufacturing 35.928%', 'target': 'Metal Products 3.878%', 'value': 3.878490377},
    {'source': 'Manufacturing 35.928%', 'target': 'Electrical and Machinery 4.271%', 'value': 4.271222104},
    {'source': 'Manufacturing 35.928%', 'target': 'Transport Equipment 6.463%', 'value': 6.462731524},
    {'source': 'Manufacturing 35.928%', 'target': 'Other Manufacturing 0.265%', 'value': 0.265200075},
    {'source': 'Electricity, Gas and Water 32.088%', 'target': 'Electricity, Gas and Waters 32.088%', 'value': 32.0882246},
    {'source': 'Construction 0.100%', 'target': 'Constructions 0.100%', 'value': 0.099544601},
    {'source': 'Service 0.262%', 'target': 'Maintenance and Repair 0.012%', 'value': 0.012181044},
    {'source': 'Service 0.262%', 'target': 'Hotels and Restraurants 0.036%', 'value': 0.036191152},
    {'source': 'Service 0.262%', 'target': 'Education, Health and \nOther Services 0.214%', 'value': 0.213751813},
    {'source': 'Trades 2.771%', 'target': 'Wholesale Trade 0.582%', 'value': 0.582134933},
    {'source': 'Trades 2.771%', 'target': 'Retail Trade 0.100%', 'value': 0.100481202},
    {'source': 'Trades 2.771%', 'target': 'Finacial Intermediation and \nBusiness Activities 2.088%', 'value': 2.087946543},
    {'source': 'Trades 2.771%', 'target': 'Re-export & Re-import 0.000%', 'value': 0},
    {'source': 'Transport 27.551%', 'target': 'Transports 27.289%', 'value': 27.28894188},
    {'source': 'Transport 27.551%', 'target': 'Post and Telecommunications 0.262%', 'value': 0.261952956},
    {'source': 'Others 1.070%', 'target': 'Mining and Quarrying 0.918%', 'value': 0.918077232},
    {'source': 'Others 1.070%', 'target': 'Private Households 0.000%', 'value': 1.8858E-10},
    {'source': 'Others 1.070%', 'target': 'Recycling 0.113%', 'value': 0.112953746},
    {'source': 'Others 1.070%', 'target': 'Public Administration 0.039%', 'value': 0.039082391},
    {'source': 'Others 1.070%', 'target': 'Other 0.000%', 'value': 5.41204E-08}
]
from pyecharts import Sankey
def label_formatter(params):
    return params.value
sankey = Sankey("", width=1600, height=900)
# sankey.use_theme('dark')
sankey.add(
    '',
    nodes,
    links,
    line_opacity=0.6,
    label_text_size=16,
    line_curve=0.6,
    line_color="target",
    line_type='dash',
    is_label_show=True,
    label_pos="right",
    sankey_node_gap=20,
)
sankey.render()
